Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-02-22T15:27:15+02:00

====== Подтверждение удаления файла в консоли ======

[ @bashrc @console ]

(по-умолчанию она этого не делает)

Решение: прописать новый псевдоним для команды ''rm'' в ~/.bashrc (скрипт стартовых сценариев для профиля пользователя).

''mcedit ~/.bashrc''

Вписать в файл ~.bashrc новые строки:

'''
# Some aliases to avoid making mistakes:
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
'''

Теперь ввод ''rm'' для системы интерпретируется как ''rm -i''. Система будет запрашивать подтверждение на удаление файлов (система всегда сначала смотрит, не назначен ли вводимому имени команды псевдоним).

Чтобы изменения применились моментально:

''source ~/.bashrc''

===== rm в корзину =====

Команда ''rm'' по-умолчанию сразу и полностью удаляет указанный ей файл (или каталог через ''rm -r'').

По-настоящему ''rm'' удаляет только имя файла, а сектора с данными остаются на месте, помеченные как «тут свободно». Но в Unix удаление имения файла равно его полному исчезновению. Концепция «корзины» относится к пользовательскому окружению, её можно использовать, а можно и нет, тогда как на системном уровне всё должно быть однозначным.

Можно установить утилиту trash-cli, которая будет всё удалять «в корзину» и сделать для ''rm'' alias в ~/.bashrc:. 

''sudo apt install trash-cli''

Записать в ''~/.bashrc'' алиас:

''alias rm='trash-put'''

Теперь ''rm file.txt'' будет отправлять файл в корзину пользователя, который залогинен в консоли. А ''alias rm='rm -i''' уже не нужен.

И еще в консоли появляются команды из ''trash-cli'':

''trash-list''      # посмотреть корзину
''trash-restore''   # восстановить файл из корзины
''trash-empty''     # очистить корзину

