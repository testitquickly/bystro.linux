Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-02-22T15:27:15+02:00

====== Удаление файлов в консоли ======

[ @bashrc @console ]

Это полезная мера предосторожности — заставить консоль запрашивать подтверждение удаления файлов. 

''mcedit ~/.bashrc''

Добавить в файл ~.bashrc новые инструкции:

'''
# Some aliases to avoid making mistakes:
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
'''

Теперь ввод ''rm'' для системы интерпретируется как ''rm -i''. Система будет запрашивать подтверждение на удаление файлов (система всегда сначала смотрит, не назначен ли вводимому имени команды псевдоним).

Чтобы изменения применились моментально:

''source ~/.bashrc''

===== rm в корзину =====

Команда ''rm'' по-умолчанию сразу и полностью удаляет указанный ей файл (или каталог через ''rm -r''). Так задумано — удаление файлов происходит на уровне системы, где нужна однозначность, а как концепция «корзины» для удаляемых файлов относится к пользовательскому окружению, её использование и настройка зависит от предпочтений пользователя.

По-настоящему ''rm'' удаляет только //имя// файла, а сектора с данными остаются на месте, помеченные как «тут свободно». Но в Unix удаление «имени файла» равно его полному исчезновению с точки зрения системы.

Можно установить утилиту //trash-cli//, которая будет перехватывать удаление через ''rm'' и перемещать файлы «в корзину»: 

''sudo apt install trash-cli''

Записать в ''~/.bashrc'' алиас:

''alias rm='trash-put'''

Теперь команда “''rm file.txt''” будет отправлять файл в корзину пользователя, который залогинен в консоли. А значит ''alias rm='rm -i''' уже не нужен.

И еще в консоли появляются команды из ''trash-cli'':

''trash-list''      # посмотреть корзину
''trash-restore''   # восстановить файл из корзины
''trash-empty''     # очистить корзину
