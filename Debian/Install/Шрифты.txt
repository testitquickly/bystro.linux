Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-02-22T15:30:20+02:00

====== Шрифты ======

[ @install @debian @fonts @microsoft ]

См. https://wiki.debian.org/Fonts#Packages

Предварительно важно, чтобы для репозиториев были прописаны параметры ''contrib non-free'', потому что эти шрифты не относятся к свободному ПО. Это можно сделать одной строкой:
 
''sudo apt install software-properties-common -y; sudo apt-add-repository contrib non-free -y''

===== Установить шрифты Microsoft и IBM =====

Можно установить привычные многим шрифты от Microsoft  а также лучший шрифт для чтения с экрана IBM Plex. 

От MS придут

	* Andale Mono
	* Arial Black
	* Arial (Bold, Italic, Bold Italic)
	* Comic Sans MS (Bold)
	* Courier New (Bold, Italic, Bold Italic)
	* Georgia (Bold, Italic, Bold Italic)
	* Impact
	* Times New Roman (Bold, Italic, Bold Italic)
	* Trebuchet (Bold, Italic, Bold Italic)
	* Verdana (Bold, Italic, Bold Italic)
	* Webdings

Хотелось бы сразу, но эти шрифты надо установить по-отдельности:

''sudo apt install ttf-mscorefonts-installer''
''sudo apt install fonts-ibm-plex''
''sudo apt install fonts-cantarell''

Обновить кэш шрифтов:

''sudo fc-cache -fv && sudo apt-get update; sudo apt-get upgrade''

Проверить, что шрифт IBM установлен:

''fc-list | grep IBM''

==== Установить Ysabeau ====

А Google Font. Ysabeau offers extensive Latin, Greek and Cyrillic.

Ysabeau combines the familiar timeless letterforms of the Garamond legacy with the unencumbered crispness of a clean low-contrast sans serif. Unlike other humanist sans, Ysabeau retains the confident wide stride and unapologetic extenders of the world's favorite book face for unmitigated reading comfort. Pair it with EB Garamond or Cormorant for a perfect match.

Сделать для них каталог, чтобы сохранить:

''mkdir -p ~/Ysabeau && cd ~/Ysabeau'' 

Скачивать эти файлы через wget не получится, надо зайти через браузер на https://github.com/google/fonts/tree/main/ofl/ysabeau и скачать все (минимум два) файлы с расширением ''ttf''. Положить их в ''~/ysabeau''

''sudo mkdir -p /usr/local/share/fonts/Ysabeau && sudo cp ~/Ysabeau/*.ttf /usr/local/share/fonts/Ysabeau/ && fc-cache -fv && echo -e "\n\tПроверить появление Ysabeau в системе \n" && fc-list | grep Ysabeau''

==== Установить Cascadia Code ====

Идеален для терминала.

https://github.com/microsoft/cascadia-code/releases — выбрать Release, развернуть в нем область Assets, скачать zip.

Распаковать:

''unzip CascadiaCode*.zip -d CascadiaCode''
 
В принципе можно 

* удалить каталог ''otf''
* удалить каталог ''woff2''
* удалить ''ttf/static''
* оставить только содержимое каталога ''ttf'' — это шрифты TrueType, а в Linux под них оптимизировано почти всё

Скопировать шрифты в общий доступ:

''sudo mkdir -p /usr/local/share/fonts/CascadiaCode && sudo cp ~/CascadiaCode/*.ttf /usr/local/share/fonts/CascadiaCode/ && fc-cache -fv''

==== Установить все шрифты из Windows ====

Это не так, чтобы было нужно, но если винда была параллельно установлена, то можно взять от неё все шрифты — скопировать их из ''C:\WINDOWS\Fonts'' в ''/usr/share/fonts/truetype/msttcorefonts''

Их там несколько сотен во всяких нюансах, есть смысл выбрать нужные. К тому же, в винде файлы шрифтов называются строчными буквами, а в unix они названы с прописными, и если их скопировать втупую, то в системе окажутся сразу несколько шрифтов Arial...

Далее подразумевается, что локальный диск с операционный системой Windows примонтирован в папку /media/winda/:

'''
sudo mkdir /usr/share/fonts/truetype/msttcorefonts

sudo cp /media/winda/WINDOWS/Fonts/*.* /usr/share/fonts/truetype/msttcorefonts

sudo fc-cache -fv
'''

===== Удалить шрифты =====

По-умолчанию может быть установлено очень много шрифтов (например, 2665), среди которых множество вариантов одного и того же — 100500 вариантов шрифта Noto. 

В принципе ими можно управлять в 

'''
Параметры системы
> Внешний вид
> Управление шрифтами
'''

Может быть проще всего удалить их из консоли.

Есть два типа шрифтов, и они хранятся в разных местах:
* Системные: ''/usr/share/fonts/''
	* удалить: ''sudo rm -rf /usr/share/fonts/каталог_или_файл''
* Пользовательские: ''~/.fonts/'' или ''~/.local/share/fonts/''
	* удалить: ''rm -rf ~/.fonts/каталог_или_файл''

==== Посмотреть установленные ====

''fc-list > fonts.sh; sort fonts.sh -o fonts.sh; mcedit fonts.sh''

==== Удалить шрифты по списку ====

Есть скрипт — [[./delete_fonts.sh]] — удалит из системы все шрифты, которые в нём перечислены.

Сперва его надо сделать исполняемым:

''chmod +x delete_fonts.sh''

Выполнить:

''sudo bash delete_fonts.sh''

===== Разное =====

==== Увеличить шрифт в окне программы ====

На примере Viber, который установлен через [[Software:flatpak]] — там по-умолчанию системный шрифт очень мелкий, в чате текст сообщений увеличить невозможно.

Проверить каталог ''/etc/profile.d/'' — если там есть что-то вроде ‘qt-scaling.sh’ внутри которого задан QT_SCALE_FACTOR=0.5 globaly — удалить его или только соответствующую строку.

1. Из-под root открыть файл ''/usr/share/applications/''**''viber.desktop''**
2. Добавить в строку "Exec=" параметр ’QT_SCALE_FACTOR’

''Exec=QT_SCALE_FACTOR=1.5 /opt/viber/Viber %u''

Для других программ сделать то же самое в соответствующих .desktop файлах. Они могут находиться не в ''/usr/share'', а где-то в каталоге профиля пользователя.

==== Шрифты в flatpak ====

Если viber или любой другой софт запускается через flatpak из в ''/var/lib/flatpak/exports/share/applications'' тогда надо добавить указание про QT_SCALE_FACTOR в ярлык запуска, чтобы шрифты были читаемого размера.

Где найти место запуска: в меню программ правый клик по нужному ПО, глянуть путь вызова к файлу .desktop

Открыть его на редактирование:

''sudo mcedit /var/lib/flatpak/app/org.zim_wiki.Zim/current/active/export/share/applications/org.zim_wiki.Zim.desktop''

Найти в этом файле место вызова. Обычно оно в разделе [Desktop Entry], но там может быть несколько точек — посмотреть весь файл внимательно. 

Всякие переводы подсказок на другие языки можно (АККУРАТНО!) удалить.

И оно обязательно должно быть добавлено ДО вызова ПО (пример для viber):

''flatpak override --user'' **''--env="QT_SCALE_FACTOR=1.25"''** ''com.viber.Viber''

Может быть и так (пример для zim):

''/usr/bin/flatpak run --branch=stable --arch=x86_64 --command=zim --file-forwarding --env="QT_SCALE_FACTOR=1.25"'' **''org.zim_wiki.Zim''**

Другой софт может запускаться так

''QT_AUTO_SCREEN_SCALE_FACTOR=0 QT_SCREEN_SCALE_FACTORS=2 QT_SCALE_FACTOR=1  flatpak run org.jaspstats.JASP''

