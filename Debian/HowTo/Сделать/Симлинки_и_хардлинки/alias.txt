Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-01-08T13:07:01+02:00

====== alias ======

[ @console @bashrc ]

Любые длинные команды в консоли можно заменить коротким алиасом (alias) — слово, которое является переменной. Тот же принцип, что и в теории [[Симлинки и хардлинки]]

===== Объявить алиас =====

''alias nas='ssh astenix@192.168.80.100 -i /home/ssh_keys/astenix'''

Теперь вместо длинной команды для подключения к удалённой машине по [[Software:ssh]] под юзером ''astenix'' достаточно набрать команду “''nas''”.

Алиас будет действовать только до тех пор, пока открыта консольная сессия. Чтобы сохранить алиас «навсегда», его надо записать в последние строки файла ''~/.bashrc''

Важно понимать, что инструкции из файла ''~/.bashrc'' будут прочитаны и выполнены только в контексте профиля, в котором находится этот файл. И на самом деле они не запоминаются, а буквально //прочитываются// каждый раз при загрузке профиля пользователя, у которого в домашнем каталоге находится данный файл, после чего выполняются прописанные в том файле инструкции.

Чтобы изменения применились сразу, без релогина, надо «принудительно перечитать» этот файл:

''source ~/.bashrc''

===== Несколько алиасов для одной команды =====

Если алиас только один, то делать для него цикл излишне. Если надо сделать несколько алиасов:

''for i in ee уу учше; do alias $i='exit'; done''

===== Алиасы в отдельном файле =====

Можно положить все свои алиасы в отдельный файл ''~/.bash_aliases'' Для этого 

1) в файле ''~/.bashrc'' должно быть прописано такое условие (по-умолчанию оно там есть):

	'''
	if [ -f ~/.bash_aliases ]; then
		. ~/.bash_aliases
	fi
	'''

2) надо создать новый файл

''mcedit ~/.bash_aliases''

и ложить/класть/сохранять в него все свои алиасы.

Обязательно принудительно перечитать данные файлы чтобы применить изменения:

''source .bashrc .bash_aliases'' 

===== Функции вместо алиасов =====

В alias переменные разворачиваются один раз при определении — при открытии окна терминала происходит прочитывание содержимого файла ''~/.bashrc''. Если позже переменная изменится, алиас этого не учтёт, а функция всегда берёт текущее значение переменной при вызове.

Алиасы плохо работают с аргументами. Например, ''swap-clear arg1'' не передаст ''arg1'' в скрипт правильно. Функция может принимать аргументы.

Алиас не подходит для сложных команд с условными операторами, пайпами и многими аргументами, и это можно сделать, но через боль (всё, как мы не любим). Функция всё это обрабатывает нормально.

Поэтому //иногда//, если возникает сложная ситуация с несколькими параметрами, вместо 

''alias swap-clear="$MY_SCRIPTS/swap_clear.sh"''

разумнее делать 

''swap-clear() {''
	''"$MY_SCRIPTS/swap_clear.sh" "$@"''
''}''
