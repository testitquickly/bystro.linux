Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2024-10-27T15:22:40+02:00

====== Отформатировать HDD ======

[ @hdd @format ]

Посмотреть название диска

''lsblk''

Допустим, что нужный диск определеяется как ''/dev/sdc''

Надо будет 
* удалить все текущие партиции (разделы) с диска, 
* создать новую партицию (или несколько новых),
* отформатировать её в ext4

Start:

''sudo fdisk /dev/sdc''

Программа ожидает ввод с клавиатуры.

1) Нажать клавишу ''p'', чтобы отобразить список текущих разделов.

2) Нажать клавишу ''d''. 

	Если партиция была одна — она будет удалена. 

	Если их несколько — надо указать номер партиции, которую нужно удалить. Повторять последовательно для удаления каждого раздела на диске.

	Учесть, что партиции бывают физические и логические — сказал бы «подпартиции» по аналогии с «подкаталогами», но такой термин не используется. Поэтому если на диске есть несколько разделов, удалять их надо последовательно «сверху вниз». Если все физические удалены и остались только логические — все логические партиции будут удалены вслед за родительской физической, и будет выведено сообщение «No partition is defined yet!».

==== Создать новый раздел ====

3) Нажать клавишу ''n'' для создания нового раздела. 

	Ввести цифру ”1”.

	Ввести номер первого сектора (будет подсказка) — ''2048''.

		Это стандарт. 

		Можно выбрать любой другой сектор, но тогда будет ошибка «//Partition 1 does not start on physical sector boundary//», то есть, первый раздел на диске не выровнен по границе физического сектора, начальный сектор первого раздела не совпадает с началом физического блока на диске, что может привести к снижению производительности, особенно на современных жёстких дисках и SSD.

	Ввести номер последнего сектора (будет подсказка). 

		Или выбрать число, которое подсказано для ’default’, или нажать ''Enter'', чтобы выбрать значения по умолчанию и использовать весь диск.

Новая партиция технически создана, но ещё не отформатирована. 

	На этом этапе тип файловой системы не задан, мы всего лишь создали новую партицию, поэтому она отображается как условное ’Linux filesystem'. Позже, при форматировании, будем указывать формат 'ext4'.

	Если на диске была старая партиция с данными, и на ней была ’an ext4 signature‘ — будет предложено удалить эту сигнатуру (Y).

4) Нажать клавишу ''w'', чтобы 

	* записать изменения на диск
	* выйти из fdisk.

Результат: на диске ''/dev/sdc'' появился новый, неформатированный раздел ''/dev/sdc1''.

==== Отформатировать новый раздел ====

5) Укажем файловую систему ’ext4’

''sudo mkfs.ext4 /dev/sdc1''

Creating journal (262144 blocks): нажать ввод.
Writing superblocks and filesystem accounting information: нажать ввод.

==== Проверить новый раздел ====

''lsblk''

Ожидаем среди прочих увидеть раздел ''/dev/sdc1'', отформатированный как ext4.

==== Монтировать новый раздел ====

Опционально, для проверки, можно создать точку монтирования,  например, в каталоге /mnt/mydisk.

Создать новый каталог:

''sudo mkdir -p /mnt/mydisk''

Смонтировать в него новую партицию:

''sudo mount /dev/sdc1 /mnt/mydisk''

Если необходимо, можно обработать диск через [[Software:fsck]]
