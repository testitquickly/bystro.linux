Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2024-12-02T22:56:04+02:00

====== Поменять точку монтирования диска ======

[ @hdd @mount ]

В системе есть диск, который был примонтирован в корень системы — ''/hdd_6tb''

Надо перемонтировать его в другой каталог — ''/home/hdd_6tb''. Место и название нового каталога произвольное, можно "положить" его куда угодно, в ''/mnt'' или в ''/media'' или даже внутрь каталога своего профиля.

==== Узнать имя партиции на hdd, который надо перемонтировать ====

''lsblk''

или

''df -h''

Найти имя партиции по названию точки её монтирования, например — ''/dev/sdd1''

==== Проверить, что к диску сейчас нет обращений ====

''lsof | grep /dev/sdd1''

Если диск занят, следует выяснить все обращения к нему и закрыть их.

==== Отмонтировать диск ====

''sudo umount /dev/sdd1''

 Если диск прямо сейчас занят, и нет возможности всё прекратить, можно (но не рекомендуется) сделать "ленивое отмонтирование":

''sudo umount -l /dev/sdd1''

==== Создать новую точку монтирования ====

''mkdir -p /home/hdd-6tb''

==== Смонтировать диск в новое место ====

''sudo mount /dev/sdd1 /home/hdd-6tb''

Проверить монтирование:

''df -h | grep hdd-6tb''

==== Указать системе новую точку монтирования при загрузке ====

''sudo mcedit /etc/fstab''

Найти строку, которая относится к бывшему ''/hdd_6tb'', закомментировать (или убрать) её и вставить новую.

Можно указать идентификацию диска

а) или через имя партиции

''/dev/sdd1  /home/hdd-6tb  ext4  defaults  0  2''

б) или через UUID диска — обычный подход, для большей надежности, бо партиция меняется, а UUID нет.

Узнать UUID (всех дисков в системе):

''lsblk -o NAME,UUID''

Тогда строка может выглядеть так

''# /hdd-6tb''
''UUID=2215f247-8bfc-44eb-995e-3a9091c1da20 /home/hdd-6tb        ext4    defaults        0       2''

Сохраниться.

==== Обязательно после редактирования fstab ====

''systemctl daemon-reload''
