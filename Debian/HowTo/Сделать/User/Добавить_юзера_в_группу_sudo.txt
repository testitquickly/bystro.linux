Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-02-21T23:09:07+02:00

====== Добавить юзера в группу sudo ======

[ @debian @sudo @console ]

Тут и далее подразумеваем, что пользователь называется „astenix”.

* ''su''
* указать root password

===== Добавить юзера ''astenix'' в группу ''sudo'' =====

''/usr/sbin/usermod -a -G sudo astenix''

Читается так: 

* ''usermod'' — утилита для изменения параметров пользователя.
* ''-G sudo'' — добавляет пользователя в дополнительную группу sudo.
* ''-a'' (append) — значит «добавить к уже существующим дополнительным группам». Без этого ключа список групп был бы перезаписан (опасно!).
* ''astenix'' — имя пользователя, для которого выполняется операция.

Также можно выполнить ''gpasswd -a astenix sudo'', это другая утилита, которая делает то же самое, но эквивалентна редактированию строки ''sudo:x:27:astenix'' в файле ''/etc/group''.

===== Сделать группу ''sudo'' основной для пользователя ''astenix'' =====

''/usr/sbin/usermod -g sudo astenix''

* ''-g'' меняет primary group пользователя на ''sudo''. После этого новые файлы, создаваемые ''astenix'', будут принадлежать группе ''sudo''.

Заработает после релогина ([[logout юзера]]):

''loginctl terminate-user astenix''

===== Проверить, что пользователь ''astenix'' действительно находится в группе ''sudo'' =====

Залогиниться под astenix и выполнить

''id''

если в ответной строке есть "''27(sudo)''" то всё норм

===== Удалить UPG-группу ''astenix'' =====

По-умолчанию при добавлении пользователя в системе также создаётся группа его же имени — ''astenix:astenix'', это называется UPG (user private group). Вроде не мешает, но все новые файлы будут созданы с этими параметрами. Если в этой «именной группе» нет явной нужды, её можно убрать

''groupdel astenix''

На шаге #2 основной группой юзера была назначена группа sudo, поэтому отныне все файлы этого юзера будут созданы под ''astenix:sudo''

===== Дать юзеру права на изменение каталога /home =====

…и всех его подкаталогов:

'''
sudo chown astenix:sudo -R /home/
'''
