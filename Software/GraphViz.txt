Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2025-08-11T14:56:29+03:00

====== GraphViz ======

@diagram @graphviz @mermaid @zim 

Я привык собирать диаграммы по текстовому описанию через MermaidJS — язык описания диаграмм с простым, читаемым синтаксисом, ориентированный на текстовое описание схемы в Markdown и её рендеринг в браузере (JavaScript же). 

В [[Zim]] аналогичные диаграммы можно сгенерировать через ditaa (ветеран) и Graphviz (DOT) — язык описания диаграмм из мира науки, более мощный и гибкий, чем MermaidJS, умеет делать очень сложные графы, рендерится оффлайн через CLI, генерирует изображения в PNG, SVG, PDF и др. Эдакий TikZ, но без [[LaTeX]]. 

Код:

{{{code: id="diagram_example" lang="dot" linenumbers="True"
digraph СистемноеМышление {
	rankdir=TB; // направление раскладки графа: T — top (сверху), B — bottom (снизу)
	bgcolor="#1b1e20"; // Фон всей диаграммы — тёмно-серый

	// Настройки узлов
	node [
		fontcolor="#b2b2b2" // цвет текста и рамок (светло-серый)
		color="#b2b2b2" // цвет рамок (границ) узлов
		style=filled // стиль заливки узла — залить цветом из fillcolor
		fillcolor="#1b1e20" // фон узлов — тёмно-серый
		fontname="Ysabeau"
		fontsize="16"
	];

	// Настройки рёбер
	edge [
		arrowhead=open // глобальный тип стрелок https://graphviz.org/docs/attr-types/arrowType/
		color="#b2b2b2" // цвет линий и шрифта (светло-серый)
		fontname="Ysabeau"
		fontsize="16"
	];

	// нельзя сразу объявлять и соединять узлы, как в Mermaid
	// надо сперва расписать все сущности
	S [shape=parallelogram, label="Происходит жизнь"] // S = Start
	id1 [label="Самурай всё понимает"];
	id2 [shape=box, label="Невод закинут в море"];
	rybka [shape=egg, label="Мерзнет пингвин"];
	E [shape=note, label="Разговор исчерпан"]; // E  End
	biblioteka [shape=plaintext, label="Понял в тишине библиотеки"];
	как_думать [shape=underline, label="Самурай без меча"];
	gameOver [shape=plaintext, label="Демоны спёрли дыхание"];
	bookIsClosed [shape=folder, label="Книга недолго открыта"];
	listOfEvents [label="• Некуда спешить\n• Не о чём думать\n• Начинается дождь", fontsize=12, fontcolor="White", color="DarkOrange"];
	
	// затем их соединять в самых причудливых сочетаниях
	как_думать -> biblioteka -> listOfEvents;
	
	listOfEvents -> gameOver -> bookIsClosed;
	
	S -> id1;
	id1 -> id2 [arrowhead=tee]; // чтобы задать стиль отдельной стрелке, ноды одного пути надо разнести "две отдельно"
	id2 -> rybka -> listOfEvents -> E;
}
}}}

Результат:

{{./diagram.png?type=diagram}}

Изучить возможности: https://graphviz.org/documentation/

Включить: 

''Правка''
''> Параметры''
''> Модули''
''> Вставка диаграм''

Вставить:

''Вставка''
''> Диаграмма'' 

Набрать код, проверить его корректность через «Предварительный просмотр». Если будут ошибки, картинка не появится.

Отредактировать:

''Правой кнопкой по рисунку''
''> Редактировать''
