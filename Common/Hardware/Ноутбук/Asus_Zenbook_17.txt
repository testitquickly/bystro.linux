Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2024-10-17T13:23:46+03:00

====== Asus Zenbook 17 ======

[ @notebooks @asus ]

um6702r

Zenbook Pro 17, модель „M6702RA-M2110”

OS: Debian 12

===== Bios =====

Зажать F2 и не отпуская, нажать Power. Продолжать удерживать зажатым F2.

Последовательность загрузки: F7 > Загрузка

===== Плохой встроенный звук =====

Штатные звучки не воспроизводят низкие частоты. При этом звук в наушниках, в usb-говорилке и во внешнем мониторе работает без нареканий. Под win11 звук ноута в норме.

Проблема в том, что в ядре Debian нет поддержки фирменного аудиочипа ''cs35l41'' — это чип усилителя/кодека Cirrus Logic, который часто используется для ноутбучных динамиков. Ядро пытается его проинициализировать, но в прошивке ACPI нет нужных _DSD свойств, поэтому драйвер пишет «Platform not supported».

Нужно ядро 6.8+ и свежий ''alsa-ucm'' пакет. В Debian 12 можно поставить ядро и ''alsa-lib'' из backports:

''sudo apt install -t bookworm-backports linux-image-amd64 alsa-ucm-conf''

Но лучше не играть с бэкпортом без явной угрозы жизни и здоровью аудиофила. Если этот аудиочип реально не используется, лучше заблэклистить его:

''echo "blacklist cs35l41_hda" | sudo tee /etc/modprobe.d/blacklist-cs35l41.conf''

''sudo update-initramfs -u''

После перезагрузки ноутбука драйвер не будет загружаться и не будет сообщений о нём.

===== Сбои при восстановлении сессии после автоматического отключения экрана =====

При восстановлении на экране „серая пелена” и над ней курсор мыши. И даже если залогиниться в другом терминале ''startx'' запускается, но на экране только „серая пелена”.

Сперва посмотреть логи

''sudo journalctl -b -p err''

==== xdg-desktop-portal[2292]: pw.conf: can't load default config client.conf: Нет такого файла или каталога ====

Нет файла конфигурации client.conf для xdg-desktop-portal — это важная прослойка между приложениями и рабочим столом, которая реализует порталы (унифицированный API для доступа к функциям окружения). Flatpak, Snap и иногда sandbox-приложения не имеют прямого доступа к системе (файлам, устройствам, настройкам). Чтобы такие программы могли, например, открыть диалог выбора файла, запросить доступ к микрофону/камере или сделать скриншот, они обращаются к xdg-desktop-portal, а тот уже пробрасывает запрос в «бэкенд» под действующее окружение (в KDE — xdg-desktop-portal-kde, в GNOME — xdg-desktop-portal-gnome).

Проверить, существует ли файл конфигурации **client.conf**:

''ls ~/.config/xdg-desktop-portal/client.conf''

Если файла нет — его надо создать.

''mcedit ~/.config/xdg-desktop-portal/client.conf''

Вставить следующее содержимое:

''[Portal]''
''#Настройки портала''

Сохранить.
    
Установить пакет xdg-desktop-portal:

''sudo apt install xdg-desktop-portal''

Перезапустить сервис xdg-desktop-portal:

''systemctl --user restart xdg-desktop-portal.service''

=== **Проверить другие ошибки** ===

''journalctl -xe | grep xdg-desktop-portal''
